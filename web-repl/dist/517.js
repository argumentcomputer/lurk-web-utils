"use strict";(self.webpackChunklurk_web_repl=self.webpackChunklurk_web_repl||[]).push([[517,235,189],{235:(e,n,t)=>{t.r(n),t.d(n,{Repl:()=>k,default:()=>x,initSync:()=>M,initThreadPool:()=>p,main_js:()=>g,wbg_rayon_PoolBuilder:()=>A,wbg_rayon_start_worker:()=>h});var r=t(517);let o;const i=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});i.decode();let s=new Uint8Array;function a(){return s.buffer!==o.memory.buffer&&(s=new Uint8Array(o.memory.buffer)),s}function _(e,n){return i.decode(a().slice(e,e+n))}const c=new Array(32).fill(void 0);c.push(void 0,null,!0,!1);let u=c.length;function w(e){u===c.length&&c.push(c.length+1);const n=u;return u=c[n],c[n]=e,n}function l(e){return c[e]}let b=0;const f=new TextEncoder("utf-8");let d=new Int32Array;function y(){return d.buffer!==o.memory.buffer&&(d=new Int32Array(o.memory.buffer)),d}function m(e){const n=l(e);return function(e){e<36||(c[e]=u,u=e)}(e),n}function g(){o.main_js()}function p(e){return m(o.initThreadPool(e))}function h(e){o.wbg_rayon_start_worker(e)}class k{static __wrap(e){const n=Object.create(k.prototype);return n.ptr=e,n}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();o.__wbg_repl_free(e)}constructor(){const e=o.repl_new();return k.__wrap(e)}execute_lurk(e){try{const r=o.__wbindgen_add_to_stack_pointer(-16);o.repl_execute_lurk(r,this.ptr,w(e));var n=y()[r/4+0],t=y()[r/4+1];if(y()[r/4+2])throw m(t);return m(n)}finally{o.__wbindgen_add_to_stack_pointer(16)}}}class A{static __wrap(e){const n=Object.create(A.prototype);return n.ptr=e,n}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();o.__wbg_wbg_rayon_poolbuilder_free(e)}numThreads(){return o.wbg_rayon_poolbuilder_numThreads(this.ptr)>>>0}receiver(){return o.wbg_rayon_poolbuilder_receiver(this.ptr)}build(){o.wbg_rayon_poolbuilder_build(this.ptr)}}function v(){const e={wbg:{}};return e.wbg.__wbindgen_string_new=function(e,n){return w(_(e,n))},e.wbg.__wbindgen_string_get=function(e,n){const t=l(n),r="string"==typeof t?t:void 0;var i=null==r?0:function(e,n,t){if(void 0===t){const t=f.encode(e),r=n(t.length);return a().subarray(r,r+t.length).set(t),b=t.length,r}let r=e.length,o=n(r);const i=a();let s=0;for(;s<r;s++){const n=e.charCodeAt(s);if(n>127)break;i[o+s]=n}if(s!==r){0!==s&&(e=e.slice(s)),o=t(o,r,r=s+3*e.length);const n=function(e,n){const t=f.encode(e);return n.set(t),{read:e.length,written:t.length}}(e,a().subarray(o+s,o+r));s+=n.written}return b=s,o}(r,o.__wbindgen_malloc,o.__wbindgen_realloc),s=b;y()[e/4+1]=s,y()[e/4+0]=i},e.wbg.__wbindgen_object_drop_ref=function(e){m(e)},e.wbg.__wbindgen_throw=function(e,n){throw new Error(_(e,n))},e.wbg.__wbindgen_module=function(){return w(T.__wbindgen_wasm_module)},e.wbg.__wbindgen_memory=function(){return w(o.memory)},e.wbg.__wbg_startWorkers_6fd3af285ea11136=function(e,n,t){return w((0,r.Q)(m(e),m(n),A.__wrap(t)))},e}function W(e,n){e.wbg.memory=n||new WebAssembly.Memory({initial:18,maximum:16384,shared:!0})}function R(e,n){return o=e.exports,T.__wbindgen_wasm_module=n,d=new Int32Array,s=new Uint8Array,o.__wbindgen_start(),o}function M(e,n){const t=v();return W(t,n),e instanceof WebAssembly.Module||(e=new WebAssembly.Module(e)),R(new WebAssembly.Instance(e,t),e)}async function T(e,n){void 0===e&&(e=new URL(t(275),t.b));const r=v();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e)),W(r,n);const{instance:o,module:i}=await async function(e,n){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,n)}catch(n){if("application/wasm"==e.headers.get("Content-Type"))throw n;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n)}const t=await e.arrayBuffer();return await WebAssembly.instantiate(t,n)}{const t=await WebAssembly.instantiate(e,n);return t instanceof WebAssembly.Instance?{instance:t,module:e}:t}}(await e,r);return R(o,i)}const x=T},517:(e,n,t)=>{function r(e,n){return new Promise((t=>{e.addEventListener("message",(function r({data:o}){null!=o&&o.type===n&&(e.removeEventListener("message",r),t(o))}))}))}let o;async function i(e,n,i){const s={type:"wasm_bindgen_worker_init",module:e,memory:n,receiver:i.receiver()};o=await Promise.all(Array.from({length:i.numThreads()},(async()=>{const e=new Worker(new URL(t.p+t.u(189),t.b),{type:void 0});return e.postMessage(s),await r(e,"wasm_bindgen_worker_ready"),e}))),i.build()}t.d(n,{Q:()=>i}),r(self,"wasm_bindgen_worker_init").then((async e=>{const n=await t.e(235).then(t.bind(t,235));await n.default(e.module,e.memory),postMessage({type:"wasm_bindgen_worker_ready"}),n.wbg_rayon_start_worker(e.receiver)}))},275:(e,n,t)=>{e.exports=t.p+"eb1eb43823a81b133123.wasm"}}]);
//# sourceMappingURL=517.js.map